.react-flow__edge {
    --#{$eccgui}-reactflow-node-color-default: #{$reactflow-edge-stroke-color-default};
    --#{$eccgui}-reactflow-node-color-hover: #{$reactflow-edge-stroke-color-hover};
    --#{$eccgui}-reactflow-node-color-selected: #{$reactflow-edge-stroke-color-selected};

    stroke: var(--#{$eccgui}-reactflow-node-color-default);
    color: var(--#{$eccgui}-reactflow-node-color-default);

    path[class*="react-flow__edge"], rect[class*="react-flow__edge"] {
        shape-rendering: optimizeSpeed;
        stroke-opacity: $reactflow-edge-stroke-opacity-default;
    }

    text[class*="react-flow__edge"] {
        opacity: $reactflow-edge-stroke-opacity-default;
    }

    &:hover {
        stroke: var(--#{$eccgui}-reactflow-node-color-hover);
        color: var(--#{$eccgui}-reactflow-node-color-hover);

        path[class*="react-flow__edge"], rect[class*="react-flow__edge"] {
            stroke-opacity: $reactflow-edge-stroke-opacity-hover;
        }

        text[class*="react-flow__edge"] {
            opacity: $reactflow-edge-stroke-opacity-hover;
        }
    }

    &.selected {
        stroke: var(--#{$eccgui}-reactflow-node-color-selected);
        color: var(--#{$eccgui}-reactflow-node-color-selected);

        path[class*="react-flow__edge"], rect[class*="react-flow__edge"] {
            stroke-opacity: $reactflow-edge-stroke-opacity-selected;
        }

        text[class*="react-flow__edge"] {
            opacity: $reactflow-edge-stroke-opacity-selected;
        }
    }
}

path.react-flow__edge-path {
    stroke-width: 2;
    stroke: currentColor;
    stroke-opacity: $reactflow-edge-stroke-opacity-default;

    .react-flow__edge.selected & {
        stroke-width: 2;
        stroke: currentColor;
    }
}

path.react-flow__edge-path-glow {
    stroke: currentColor;
    fill: none;
    stroke-linecap: round;

    .react-flow__edge & {
        stroke-opacity: 0;
    }

    .react-flow__edge:hover & {
        stroke-opacity: $reactflow-edge-stroke-opacity-hover * 0.2;
    }

    .react-flow__edge.selected & {
        stroke-opacity: $reactflow-edge-stroke-opacity-selected * 0.2;
    }

    .react-flow__edge.animated & {
        stroke-dasharray: unset;
        animation: unset;
    }
}

.react-flow__edgeupdater {
    stroke: currentColor;
    fill: currentColor;
    opacity: 0;

    &:hover {
        opacity: 0.05;
    }
}

.react-flow__edge-text {
    fill: currentColor;
    stroke: none;
}

.react-flow__edge-textbg {
}

// Stroke types

path.react-flow__edge-path--stroke-solid {
    stroke-dasharray: unset;
}

path.react-flow__edge-path--stroke-dashed,
.react-flow__edge.animated path.react-flow__edge-path--stroke-dashed {
    stroke-dasharray: 5;
}

path.react-flow__edge-path--stroke-dotted,
.react-flow__edge.animated path.react-flow__edge-path--stroke-dotted {
    stroke-dasharray: 2;
}

path.react-flow__edge-path--stroke-double {
    stroke: #fff !important;
    stroke-opacity: 1 !important;
    filter: drop-shadow(1px 1px 1px currentColor) drop-shadow(-1px -1px 1px currentColor);
}

path.react-flow__edge-path--stroke-doubledashed {
    stroke: #fff !important;
    stroke-opacity: 1 !important;
    filter: drop-shadow(1px 1px 1px currentColor) drop-shadow(-1px -1px 1px currentColor);
    stroke-dasharray: 5;
}

// Intent states

g[class*="#{$eccgui}-intent--"] {
    color: var(--edge-intent-color);
}

g[class*="#{$eccgui}-intent--"] > path.react-flow__edge-path,
g[class*="#{$eccgui}-intent--"] > path.react-flow__edge-path-glow {
    stroke: var(--edge-intent-color);

    .react-flow__edge.selected & {
        stroke: var(--edge-intent-color);
    }
}

g.#{$eccgui}-intent--primary {
    --edge-intent-color: #{$eccgui-color-primary};
}

g.#{$eccgui}-intent--accent {
    --edge-intent-color: #{$eccgui-color-accent};
}

g.#{$eccgui}-intent--info {
    --edge-intent-color: #{$eccgui-color-info-text};
}

g.#{$eccgui}-intent--success {
    --edge-intent-color: #{$eccgui-color-success-text};
}

g.#{$eccgui}-intent--warning {
    --edge-intent-color: #{$eccgui-color-warning-text};
}

g.#{$eccgui}-intent--danger {
    --edge-intent-color: #{$eccgui-color-danger-text};
}

// Highlightning

path.react-flow__edge-path-highlight {
    stroke-opacity: 1;
    fill: none;
    stroke-linecap: round;
    stroke: #fff;
    filter:
        drop-shadow(2px -2px 1px var(--edge-highlight-default-color))
        drop-shadow(-2px 2px 1px var(--edge-highlight-alternate-color, var(--edge-highlight-default-color)));
}

.#{$eccgui}-graphviz__edge--highlight-default {
    --edge-highlight-default-color: #{$eccgui-color-accent};
    --edge-highlight-alternate-color: #{$eccgui-color-accent};
}

.#{$eccgui}-graphviz__edge--highlight-alternate {
    --edge-highlight-default-color: #{$eccgui-color-primary};
    --edge-highlight-alternate-color: #{$eccgui-color-primary};
}

.#{$eccgui}-graphviz__edge--highlight-default.#{$eccgui}-graphviz__edge--highlight-alternate {
    --edge-highlight-default-color: #{$eccgui-color-accent};
    --edge-highlight-alternate-color: #{$eccgui-color-primary};
}



// Type colors

.react-flow__edge-default,
.react-flow__edge-straight,
.react-flow__edge-smoothstep,
.react-flow__edge-step {
}

.react-flow__edge-success {
    --#{$eccgui}-reactflow-node-color-default: #{$eccgui-color-success-text};
    --#{$eccgui}-reactflow-node-color-hover: #{$eccgui-color-success-text};
    --#{$eccgui}-reactflow-node-color-selected: #{$eccgui-color-success-text};
}

.react-flow__edge-warning {
    --#{$eccgui}-reactflow-node-color-default: #{$eccgui-color-warning-text};
    --#{$eccgui}-reactflow-node-color-hover: #{$eccgui-color-warning-text};
    --#{$eccgui}-reactflow-node-color-selected: #{$eccgui-color-warning-text};
}

.react-flow__edge-danger {
    --#{$eccgui}-reactflow-node-color-default: #{$eccgui-color-danger-text};
    --#{$eccgui}-reactflow-node-color-hover: #{$eccgui-color-danger-text};
    --#{$eccgui}-reactflow-node-color-selected: #{$eccgui-color-danger-text};
}

// Tools overlay

.#{$eccgui}-graphviz__edgetools-target {
    position: fixed;
    width: $eccgui-size-block-whitespace * 2;
    height: $eccgui-size-block-whitespace * 2;
    //margin-left: -1 * $eccgui-size-block-whitespace;
    margin-top: -1 * $eccgui-size-block-whitespace;
    z-index: 1000;
}

.#{$eccgui}-graphviz__edgetools-overlay {
    //transform: translate(#{$eccgui-size-block-whitespace}, #{-1 * $eccgui-size-block-whitespace});
}

.#{$eccgui}-graphviz__edgetools-content {
    padding: $eccgui-size-block-whitespace * 0.5;
    max-width: $reactflow-node-basesize * 8;
    min-width: $reactflow-node-basesize;
    max-height: $reactflow-node-basesize * 13;
    min-height: $reactflow-node-basesize;
}

// Arrows

.react-flow__arrowhead {
    polyline {
        stroke-width: 1px;
        stroke-linecap: square;
        stroke-linejoin: miter;
        stroke: currentColor;
        fill: currentColor;
        transform: scale(1.75, 0.75);
    }
}

// Custom label

.#{$eccgui}-graphviz__edge-label {
    border: 0.5*$reactflow-node-border-width solid currentColor;
    border-radius: $reactflow-node-border-radius;
    background: #fff; // TODO color
    color: currentColor;
    display: inline-flex;
    align-items: center;
    width: auto;
    max-width: 20rem;
    height: 0.5 * $reactflow-node-largesize;
    font-size: $reactflow-node-font-size;

    &.#{$eccgui}-intent--primary {
        color: $eccgui-color-primary;
        border-color: $eccgui-color-primary;
    }
    &.#{$eccgui}-intent--accent {
        color: $eccgui-color-accent;
        border-color: $eccgui-color-accent;
    }
    &.#{$eccgui}-intent--success {
        color: $eccgui-color-success-text;
        border-color: $eccgui-color-success-text;
    }
    &.#{$eccgui}-intent--info {
        color: $eccgui-color-info-text;
        border-color: $eccgui-color-info-text;
    }
    &.#{$eccgui}-intent--warning {
        color: $eccgui-color-warning-text;
        border-color: $eccgui-color-warning-text;
    }
    &.#{$eccgui}-intent--danger {
        color: $eccgui-color-danger-text;
        border-color: $eccgui-color-danger-text;
    }
}
.#{$eccgui}-graphviz__edge-label--large {
    height: $reactflow-node-largesize;
}
.#{$eccgui}-graphviz__edge-label--fullwidth {
    max-width: none;
    width: 100%;
}
.#{$eccgui}-graphviz__edge-label__depiction {
    margin-left: 2px;
    display: inline-flex;
    flex-grow: 0;
    flex-shrink: 0;
    .#{$eccgui}-depiction__image {
        height: calc(#{0.5 * $reactflow-node-largesize} - 4px);

        .#{$eccgui}-graphviz__edge-label--large & {
            height: calc(#{$reactflow-node-largesize} - 4px);
        }
    }
}
.#{$eccgui}-graphviz__edge-label__text {
    margin: 0 $eccgui-size-block-whitespace * 0.25;
    flex-grow: 1;
    flex-shrink: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-align: center;

    .#{$eccgui}-graphviz__edge-label--fullwidth & {
        text-align: left;
    }
}
.#{$eccgui}-graphviz__edge-label__aux {
    margin-right: $eccgui-size-block-whitespace * 0.25;
    flex-grow: 0;
    flex-shrink: 0;
}
